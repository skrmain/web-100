<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Light/Dark Mode Toggle</title>

    <style>
      /* ============================================
       CSS VARIABLES - Theme Color Definitions
       ============================================ */

      /* Light theme colors (default) */
      :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f5f5f5;
        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --accent: #3498db;
        --border: #e0e0e0;
        --shadow: rgba(0, 0, 0, 0.1);
      }

      /* Dark theme colors - Applied when data-theme="dark" */
      [data-theme="dark"] {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --text-primary: #ecf0f1;
        --text-secondary: #bdc3c7;
        --accent: #3498db;
        --border: #404040;
        --shadow: rgba(0, 0, 0, 0.3);
      }

      /* ============================================
       BASE STYLES
       ============================================ */

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Apply smooth transitions to theme changes */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        transition: background-color 0.3s ease, color 0.3s ease;
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* ============================================
       HEADER STYLES
       ============================================ */

      header {
        background-color: var(--bg-secondary);
        border-bottom: 1px solid var(--border);
        padding: 1rem 2rem;
        box-shadow: 0 2px 4px var(--shadow);
        transition: background-color 0.3s ease, border-color 0.3s ease;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      h1 {
        font-size: 1.5rem;
        color: var(--text-primary);
      }

      /* ============================================
       THEME TOGGLE SWITCH STYLES
       ============================================ */

      /* Container for the toggle switch */
      .theme-toggle-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      /* Label for accessibility */
      .theme-toggle-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      /* Hide the default checkbox */
      .theme-toggle-checkbox {
        opacity: 0;
        position: absolute;
        width: 0;
        height: 0;
      }

      /* Custom toggle switch */
      .theme-toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 30px;
        background-color: var(--border);
        border-radius: 30px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        border: 2px solid var(--border);
      }

      /* Toggle switch circle (slider) */
      .theme-toggle-switch::before {
        content: "";
        position: absolute;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background-color: white;
        top: 50%;
        left: 4px;
        transform: translateY(-50%);
        transition: transform 0.3s ease, background-color 0.3s ease;
        box-shadow: 0 2px 4px var(--shadow);
      }

      /* When checkbox is checked (dark mode) */
      .theme-toggle-checkbox:checked + .theme-toggle-switch {
        background-color: var(--accent);
        border-color: var(--accent);
      }

      /* Move slider to the right when checked */
      .theme-toggle-checkbox:checked + .theme-toggle-switch::before {
        transform: translateX(30px) translateY(-50%);
        background-color: #ffffff;
      }

      /* Focus styles for accessibility (keyboard navigation) */
      .theme-toggle-checkbox:focus + .theme-toggle-switch {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
      }

      /* ============================================
       MAIN CONTENT STYLES
       ============================================ */

      main {
        flex: 1;
        max-width: 800px;
        margin: 0 auto;
        padding: 3rem 2rem;
        width: 100%;
      }

      .content-card {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px var(--shadow);
        transition: background-color 0.3s ease, border-color 0.3s ease,
          box-shadow 0.3s ease;
      }

      h2 {
        color: var(--accent);
        margin-bottom: 1rem;
        font-size: 1.5rem;
      }

      p {
        color: var(--text-secondary);
        margin-bottom: 1rem;
      }

      /* ============================================
       FEATURE LIST STYLES
       ============================================ */

      .feature-list {
        list-style: none;
        padding: 0;
      }

      .feature-list li {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        background-color: var(--bg-primary);
        border-left: 3px solid var(--accent);
        border-radius: 4px;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .feature-list li:hover {
        transform: translateX(5px);
      }

      /* ============================================
       FOOTER STYLES
       ============================================ */

      footer {
        background-color: var(--bg-secondary);
        border-top: 1px solid var(--border);
        padding: 1.5rem 2rem;
        text-align: center;
        color: var(--text-secondary);
        font-size: 0.9rem;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      /* ============================================
       RESPONSIVE DESIGN
       ============================================ */

      @media (max-width: 600px) {
        header {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        main {
          padding: 2rem 1rem;
        }

        .content-card {
          padding: 1.5rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- ============================================
       HEADER SECTION
       Contains the title and theme toggle switch
       ============================================ -->
    <header>
      <h1>üåì Theme Toggle Demo</h1>

      <!-- Theme Toggle Container -->
      <div class="theme-toggle-container">
        <span class="theme-toggle-label" id="theme-label"> Dark Mode </span>

        <!-- 
        Accessible toggle switch:
        - Hidden checkbox for functionality
        - Custom visual switch for styling
        - aria-label for screen readers
        - keyboard accessible (Tab + Space/Enter)
      -->
        <label
          for="theme-toggle"
          aria-label="Toggle between light and dark mode"
        >
          <input
            type="checkbox"
            id="theme-toggle"
            class="theme-toggle-checkbox"
            aria-checked="false"
          />
          <span class="theme-toggle-switch"></span>
        </label>
      </div>
    </header>

    <!-- ============================================
       MAIN CONTENT SECTION
       ============================================ -->
    <main>
      <article class="content-card">
        <h2>Welcome to the Theme Toggle Demo</h2>
        <p>
          This application demonstrates a modern implementation of light and
          dark mode theming using pure HTML, CSS, and JavaScript. Try toggling
          the theme using the switch in the header!
        </p>
        <p>
          Your preference will be saved and remembered even after you reload the
          page. The app also respects your system's default color scheme on
          first visit.
        </p>
      </article>

      <article class="content-card">
        <h2>Key Features</h2>
        <ul class="feature-list">
          <li>‚ú® Smooth theme transitions with CSS variables</li>
          <li>üíæ Theme preference persisted in localStorage</li>
          <li>üñ•Ô∏è Respects system color scheme (prefers-color-scheme)</li>
          <li>‚ôø Fully accessible with keyboard navigation</li>
          <li>üì± Responsive design for all screen sizes</li>
          <li>üé® Clean, modern UI with subtle animations</li>
        </ul>
      </article>

      <article class="content-card">
        <h2>How It Works</h2>
        <p>
          <strong>CSS Variables:</strong> The theme colors are defined using CSS
          custom properties (variables) in the :root selector. When the theme
          changes, we simply update the data-theme attribute, which switches all
          the color values instantly.
        </p>
        <p>
          <strong>localStorage:</strong> Your theme choice is saved to the
          browser's localStorage, so it persists across page reloads and browser
          sessions.
        </p>
        <p>
          <strong>System Preference:</strong> On your first visit, the app
          checks your operating system's theme preference using the
          prefers-color-scheme media query and sets the theme accordingly.
        </p>
      </article>
    </main>

    <!-- ============================================
       FOOTER SECTION
       ============================================ -->
    <footer>
      <p>Built with modern web standards ‚Ä¢ HTML ‚Ä¢ CSS ‚Ä¢ Vanilla JavaScript</p>
    </footer>

    <!-- ============================================
       JAVASCRIPT - Theme Logic
       ============================================ -->
    <script>
      // ============================================
      // CONSTANTS AND DOM ELEMENTS
      // ============================================

      // Get references to DOM elements
      const themeToggle = document.getElementById("theme-toggle");
      const themeLabel = document.getElementById("theme-label");
      const htmlElement = document.documentElement;

      // localStorage key for storing theme preference
      const THEME_STORAGE_KEY = "theme-preference";

      // Theme constants
      const THEME_LIGHT = "light";
      const THEME_DARK = "dark";

      // ============================================
      // THEME DETECTION AND INITIALIZATION
      // ============================================

      /**
       * Get the user's preferred theme
       * Priority order:
       * 1. Saved preference in localStorage
       * 2. System preference (prefers-color-scheme)
       * 3. Default to light theme
       */
      function getPreferredTheme() {
        // Check if user has a saved preference
        const savedTheme = localStorage.getItem(THEME_STORAGE_KEY);

        if (savedTheme) {
          return savedTheme;
        }

        // Check system preference using media query
        if (
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches
        ) {
          return THEME_DARK;
        }

        // Default to light theme
        return THEME_LIGHT;
      }

      /**
       * Apply the theme to the page
       * @param {string} theme - Either 'light' or 'dark'
       */
      function applyTheme(theme) {
        // Set data-theme attribute on html element
        htmlElement.setAttribute("data-theme", theme);

        // Update toggle checkbox state
        themeToggle.checked = theme === THEME_DARK;

        // Update aria-checked for accessibility
        themeToggle.setAttribute("aria-checked", theme === THEME_DARK);

        // Update label text
        themeLabel.textContent =
          theme === THEME_DARK ? "Light Mode" : "Dark Mode";

        // Save preference to localStorage
        localStorage.setItem(THEME_STORAGE_KEY, theme);
      }

      /**
       * Toggle between light and dark themes
       */
      function toggleTheme() {
        const currentTheme =
          htmlElement.getAttribute("data-theme") || THEME_LIGHT;
        const newTheme =
          currentTheme === THEME_LIGHT ? THEME_DARK : THEME_LIGHT;
        applyTheme(newTheme);
      }

      // ============================================
      // EVENT LISTENERS
      // ============================================

      // Listen for toggle switch changes
      themeToggle.addEventListener("change", toggleTheme);

      // Listen for system theme changes (when user changes OS theme)
      if (window.matchMedia) {
        window
          .matchMedia("(prefers-color-scheme: dark)")
          .addEventListener("change", (e) => {
            // Only auto-update if user hasn't manually set a preference
            if (!localStorage.getItem(THEME_STORAGE_KEY)) {
              applyTheme(e.matches ? THEME_DARK : THEME_LIGHT);
            }
          });
      }

      // ============================================
      // INITIALIZATION
      // ============================================

      // Apply the preferred theme on page load
      // This runs immediately to prevent flash of wrong theme
      (function initializeTheme() {
        const preferredTheme = getPreferredTheme();
        applyTheme(preferredTheme);
      })();

      // ============================================
      // KEYBOARD ACCESSIBILITY
      // ============================================

      // Additional keyboard support (Space and Enter keys)
      themeToggle.addEventListener("keydown", (e) => {
        // Handle Space and Enter keys
        if (e.key === " " || e.key === "Enter") {
          e.preventDefault(); // Prevent page scroll on Space
          themeToggle.checked = !themeToggle.checked;
          toggleTheme();
        }
      });
    </script>
  </body>
</html>
