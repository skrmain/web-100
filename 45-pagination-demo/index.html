<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vanilla JS Pagination Demo</title>

    <style>
      /* * 1. CSS VARIABLES & THEMING
         * Using :root for global variables to easily handle colors and dark mode.
         */
      :root {
        --bg-body: #f4f6f8;
        --bg-card: #ffffff;
        --text-main: #333333;
        --text-muted: #666666;
        --primary: #3b82f6;
        --primary-hover: #2563eb;
        --border: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      /* Dark Mode Support via media query */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg-body: #0f172a;
          --bg-card: #1e293b;
          --text-main: #f1f5f9;
          --text-muted: #94a3b8;
          --border: #334155;
        }
      }

      /* * 2. GLOBAL RESET & BASE STYLES
         */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
          Arial, sans-serif;
        background-color: var(--bg-body);
        color: var(--text-main);
        line-height: 1.6;
        padding: 2rem;
        transition:
          background-color 0.3s ease,
          color 0.3s ease;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        margin-bottom: 2rem;
        text-align: center;
      }

      h1 {
        margin-bottom: 0.5rem;
      }
      .stats {
        color: var(--text-muted);
        font-size: 0.9rem;
      }

      /* * 3. DATA GRID (The Content)
         * Using CSS Grid for responsive layout.
         */
      #data-container {
        display: grid;
        grid-template-columns: repeat(
          auto-fill,
          minmax(200px, 1fr)
        ); /* Responsive columns */
        gap: 1.5rem;
        margin-bottom: 2rem;
        min-height: 400px; /* Prevents layout jump when loading */
      }

      .card {
        background-color: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        transition: transform 0.2s ease;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .card:hover {
        transform: translateY(-4px);
      }
      .card-id {
        font-size: 0.8rem;
        color: var(--text-muted);
        font-weight: bold;
        margin-bottom: 0.5rem;
      }
      .card-title {
        font-size: 1.1rem;
        font-weight: 600;
        text-align: center;
      }

      /* * 4. PAGINATION CONTROLS
         * Flexbox for centering buttons.
         */
      .pagination-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .btn {
        background: var(--bg-card);
        border: 1px solid var(--border);
        color: var(--text-main);
        padding: 0.5rem 1rem;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-family: inherit;
        font-weight: 500;
      }

      .btn:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
      }

      /* Active State (Current Page) */
      .btn.active {
        background-color: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      /* Disabled State (First/Last Page) */
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Mobile Optimization */
      @media (max-width: 600px) {
        body {
          padding: 1rem;
        }
        #data-container {
          gap: 1rem;
        }
        .btn {
          padding: 0.4rem 0.8rem;
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Product Catalog</h1>
        <p class="stats">
          Showing <span id="item-count">0</span> items across
          <span id="page-count">0</span> pages.
        </p>
      </header>

      <div id="data-container"></div>

      <nav class="pagination-wrapper" aria-label="Pagination Navigation">
        <button class="btn" id="prev-btn" aria-label="Previous Page">
          Previous
        </button>
        <div id="pagination-numbers" style="display: contents"></div>
        <button class="btn" id="next-btn" aria-label="Next Page">Next</button>
      </nav>
    </div>

    <script>
      /*
       * 1. STATE MANAGEMENT
       * Centralized state to keep track of where the user is.
       */
      const state = {
        dataset: [], // Holds all 100+ items
        currentPage: 1, // Current active page
        itemsPerPage: 8, // How many items to show per page
        totalPages: 0, // Calculated dynamically
      };

      /*
       * 2. DATA GENERATION (Simulating an API)
       * Creates an array of 100 dummy products.
       */
      function generateData() {
        const categories = ["Electronics", "Clothing", "Home", "Books", "Toys"];
        const data = [];
        for (let i = 1; i <= 100; i++) {
          const randomCat =
            categories[Math.floor(Math.random() * categories.length)];
          data.push({
            id: i,
            name: `Product Item ${i}`,
            category: randomCat,
          });
        }
        return data;
      }

      /*
       * 3. DOM ELEMENTS
       * Cache DOM references to avoid repeated lookups.
       */
      const dom = {
        container: document.getElementById("data-container"),
        numbersContainer: document.getElementById("pagination-numbers"),
        prevBtn: document.getElementById("prev-btn"),
        nextBtn: document.getElementById("next-btn"),
        itemCountSpan: document.getElementById("item-count"),
        pageCountSpan: document.getElementById("page-count"),
      };

      /*
       * 4. CORE LOGIC FUNCTIONS
       */

      // Initialize the App
      function init() {
        state.dataset = generateData();
        state.totalPages = Math.ceil(state.dataset.length / state.itemsPerPage);

        // Update Header Stats
        dom.itemCountSpan.textContent = state.dataset.length;
        dom.pageCountSpan.textContent = state.totalPages;

        // Attach Event Listeners
        setupEventListeners();

        // Initial Render
        render();
      }

      // Calculate and Render the Items for the Current Page
      function render() {
        // A. Clear existing content
        dom.container.innerHTML = "";
        dom.numbersContainer.innerHTML = "";

        // B. Calculate Slices
        // Start index: (Page 1 - 1) * 8 = 0
        const startIndex = (state.currentPage - 1) * state.itemsPerPage;
        // End index: 0 + 8 = 8 (slice is exclusive at the end)
        const endIndex = startIndex + state.itemsPerPage;

        // C. Get visible items
        const visibleItems = state.dataset.slice(startIndex, endIndex);

        // D. Render Items to DOM
        visibleItems.forEach((item) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
                    <div class="card-id">#${item.id}</div>
                    <div class="card-title">${item.name}</div>
                    <div style="margin-top:0.5rem; font-size:0.85rem; color:var(--primary);">${item.category}</div>
                `;
          dom.container.appendChild(card);
        });

        // E. Render Pagination Controls
        updatePaginationControls();
      }

      // Update Buttons and Page Numbers
      function updatePaginationControls() {
        // 1. Handle Prev/Next Button States
        dom.prevBtn.disabled = state.currentPage === 1;
        dom.nextBtn.disabled = state.currentPage === state.totalPages;

        // 2. Generate Page Numbers
        // We loop through total pages to create buttons
        // (For very large datasets, you'd use a sliding window logic here)
        for (let i = 1; i <= state.totalPages; i++) {
          const pageBtn = document.createElement("button");
          pageBtn.className = "btn";
          pageBtn.textContent = i;

          // Highlight active page
          if (i === state.currentPage) {
            pageBtn.classList.add("active");
            pageBtn.setAttribute("aria-current", "page");
          }

          // Add click event for specific page
          pageBtn.addEventListener("click", () => {
            handlePageChange(i);
          });

          dom.numbersContainer.appendChild(pageBtn);
        }
      }

      // Handle Page Change Logic
      function handlePageChange(newPage) {
        // Guard clause: Prevent going out of bounds
        if (
          newPage < 1 ||
          newPage > state.totalPages ||
          newPage === state.currentPage
        ) {
          return;
        }

        state.currentPage = newPage;

        // Optional: View Transition API check (Modern feature)
        if (document.startViewTransition) {
          document.startViewTransition(() => render());
        } else {
          render();
        }

        // Scroll to top of container for better UX on mobile
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      /*
       * 5. EVENT LISTENERS
       */
      function setupEventListeners() {
        dom.prevBtn.addEventListener("click", () => {
          handlePageChange(state.currentPage - 1);
        });

        dom.nextBtn.addEventListener("click", () => {
          handlePageChange(state.currentPage + 1);
        });
      }

      // Run the app
      init();
    </script>
  </body>
</html>
